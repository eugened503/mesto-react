(this["webpackJsonpmesto-react"]=this["webpackJsonpmesto-react"]||[]).push([[0],{11:function(e,t,a){e.exports=a(17)},16:function(e,t,a){},17:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(5),c=a.n(o),i=(a(16),a(10)),l=a(1),u=a(6),s=a.n(u);var p=function(){return r.a.createElement("header",{className:"header"},r.a.createElement("img",{src:s.a,alt:"\u043b\u043e\u0433\u043e\u0442\u0438\u043f \u041c\u0435\u0441\u0442\u043e-\u0420\u043e\u0441\u0441\u0438\u044f",className:"header__logo"}))},m=a(7);var d=function(e){var t=e.card.owner._id===e.currentUser._id,a="card__trash-button ".concat(t?"":"card__trash-button_hidden"),n=e.card.likes.some((function(t){return t._id===e.currentUser._id})),o="card__like-button ".concat(n?"card__like-button_active":"");return r.a.createElement("div",{className:"card"},r.a.createElement("img",{className:"card__image",alt:"\u0432\u0430\u0448\u0435 \u0444\u043e\u0442\u043e",id:"myImg",src:e.card.link,onClick:function(){e.onCardClick(e.card)}}),r.a.createElement("h2",{className:"card__title"},e.card.name),r.a.createElement("button",{type:"button",className:a,onClick:function(){e.onCardDelete(e.card)},"aria-label":"\u043a\u043e\u0440\u0437\u0438\u043d\u0430"}),r.a.createElement("button",{type:"button",className:o,onClick:function(){e.onCardLike(e.card)},"aria-label":"\u043b\u0430\u0439\u043a"}),r.a.createElement("h2",{className:"card__like-sum"},e.card.likes.length>0?"".concat(e.card.likes.length):0," "))},_=r.a.createContext();var f=function(e){var t=r.a.useContext(_);return r.a.createElement("main",{className:"content"},r.a.createElement("section",{className:"profile"},r.a.createElement("img",Object(m.a)({src:t.avatar,alt:t.name,className:"profile__image"},"alt","\u041f\u043e\u0440\u0442\u0440\u0435\u0442 \u0430\u0432\u0442\u043e\u0440\u0430")),r.a.createElement("div",{className:"header__pencil",onClick:e.onEditAvatar}),r.a.createElement("div",{className:"profile-info"},r.a.createElement("div",{className:"information"},r.a.createElement("h1",{className:"profile-info__title"},t.name),r.a.createElement("p",{className:"profile-info__subtitle"},t.about)),r.a.createElement("button",{type:"button",className:"profile-info__button","aria-label":"\u0440\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:e.onEditProfile})),r.a.createElement("button",{type:"button",className:"profile__add-button","aria-label":"\u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",onClick:e.onAddPlace})),r.a.createElement("section",{className:"cards"},e.cards.map((function(a){return r.a.createElement(d,{card:a,key:a._id,onCardClick:e.onCardClick,currentUser:t,onCardLike:e.onCardLike,onCardDelete:e.onCardDelete})}))))};var h=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer__copyright"},"\xa9 2020 Mesto Russia"))};var E=function(e){return r.a.createElement("section",{className:"popup popup-enlargement ".concat(e.isOpen&&"popup_opened")},r.a.createElement("form",{className:"popup__container-enlargement",name:"container",method:"post",action:"#"},r.a.createElement("img",{src:e.card.link,alt:"\u0432\u0430\u0448\u0435 \u0444\u043e\u0442\u043e",className:"popup__img-enlargement"}),r.a.createElement("h2",{className:"popup__title popup__title-enlargement"},e.card.name),r.a.createElement("button",{type:"button",className:"popup__close-button popup__close-button-enlargement","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})))};var v=function(e){return r.a.createElement("section",{className:e.isOpen?"popup popup-".concat(e.name," popup_opened"):"popup popup-".concat(e.name)},r.a.createElement("form",{onSubmit:e.onSubmit,className:"popup__container popup__form"},r.a.createElement("h2",{className:"popup__title"},e.title),e.children,r.a.createElement("button",{type:"submit",className:"popup__btn popup__button","aria-label":"\u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c",id:"active-passive-btn"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"),r.a.createElement("button",{type:"button",className:"popup__close-button","aria-label":"\u0437\u0430\u043a\u0440\u044b\u0442\u044c",onClick:e.onClose})))},b=a(8),k=a(9),g=new(function(){function e(t){var a=t.baseUrl,n=t.authorization;Object(b.a)(this,e),this._baseUrl=a,this._authorization=n}return Object(k.a)(e,[{key:"_fetch",value:function(e,t){return t.headers={authorization:this._authorization,"Content-Type":"application/json"},fetch(this._baseUrl+e,t).then((function(e){return e.ok?e.json():Promise.reject(e.status)}))}},{key:"getInitialCards",value:function(e){return this._fetch(e,{method:"GET"})}},{key:"getUserInfoServer",value:function(e){return this._fetch(e,{method:"GET"})}},{key:"sendUserInfo",value:function(e,t){return this._fetch(e,{method:"PATCH",body:JSON.stringify({name:"".concat(t.name),about:"".concat(t.about)})})}},{key:"sendCard",value:function(e,t){return this._fetch(e,{method:"POST",body:JSON.stringify({name:"".concat(t.name),link:"".concat(t.link)})})}},{key:"deleteCard",value:function(e){return this._fetch(e,{method:"DELETE"})}},{key:"putLikeCard",value:function(e){return this._fetch(e,{method:"PUT"})}},{key:"deleteLikeCard",value:function(e){return this._fetch(e,{method:"DELETE"})}},{key:"changeAvatar",value:function(e,t){return this._fetch(e,{method:"PATCH",body:JSON.stringify({avatar:"".concat(t.avatar)})})}}]),e}())({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-12",authorization:"b6efac6e-fe72-4acc-8171-d974e56a542c"});var C=function(e){var t=r.a.useState(""),a=Object(l.a)(t,2),n=a[0],o=a[1],c=r.a.useState(""),i=Object(l.a)(c,2),u=i[0],s=i[1],p=r.a.useContext(_);return r.a.useEffect((function(){o(p.name),s(p.about)}),[p]),r.a.createElement(v,{name:"profile",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onSubmit:function(t){t.preventDefault(),e.onUpdateUser({name:n,about:u})},isOpen:e.isOpen,onClose:e.onClose},r.a.createElement("input",{defaultValue:n,onChange:function(e){o(e.target.value)},id:"name-input",type:"text",required:!0,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",name:"name",className:"popup__text popup__text_text-margin popup__input",minLength:"2",maxLength:"40",pattern:"[\u0410-\u042f\u0430-\u044fA-Za-z -]{2,40}"}),r.a.createElement("span",{id:"name-input-error",className:"popup__input-error"}),r.a.createElement("input",{defaultValue:u,onChange:function(e){s(e.target.value)},id:"work-input",type:"text",required:!0,placeholder:"\u0420\u043e\u0434 \u0434\u0435\u044f\u0442\u0435\u043b\u044c\u043d\u043e\u0441\u0442\u0438",name:"about",className:"popup__text popup__text_work-margin popup__input",minLength:"2",maxLength:"200"}),r.a.createElement("span",{id:"work-input-error",className:"popup__input-error"}))};var N=function(e){var t=r.a.useRef();return r.a.createElement(v,{isOpen:e.isOpen,onClose:e.onClose,name:"avatar",onSubmit:function(a){a.preventDefault(),e.onUpdateAvatar({avatar:t.current.value})},title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440"},r.a.createElement("input",{ref:t,type:"url",id:"link-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,defaultValue:"",name:"avatar",className:"popup__text popup__text_work-margin popup__link popup__input popup__text_avatar",pattern:"^(https?:\\/\\/)?([\\w-]{1,32}\\.[\\w-]{1,32})[^\\s@]*$"}),r.a.createElement("span",{id:"link-input-error",className:"popup__input-error"}))};var y=function(e){var t=r.a.useRef(),a=r.a.useRef();return r.a.createElement(v,{isOpen:e.isOpen,onClose:e.onClose,name:"foto",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",onSubmit:function(n){n.preventDefault(),e.onAddPlace({name:t.current.value,link:a.current.value})}},r.a.createElement("input",{ref:t,type:"text",id:"title-input",placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",required:!0,defaultValue:"",name:"title",className:"popup__text popup__text_text-margin popup__name popup__input",minLength:"1",maxLength:"30"}),r.a.createElement("span",{id:"title-input-error",className:"popup__input-error"}),r.a.createElement("input",{ref:a,type:"url",id:"link-input",placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,defaultValue:"",name:"link",className:"popup__text popup__text_work-margin popup__link popup__input",pattern:"^(https?:\\/\\/)?([\\w-]{1,32}\\.[\\w-]{1,32})[^\\s@]*$"}),r.a.createElement("span",{id:"link-input-error",className:"popup__input-error"}))};var O=function(){var e=r.a.useState({}),t=Object(l.a)(e,2),a=t[0],n=t[1],o=r.a.useState([]),c=Object(l.a)(o,2),u=c[0],s=c[1],m=r.a.useState(!1),d=Object(l.a)(m,2),b=d[0],k=d[1],O=r.a.useState(!1),x=Object(l.a)(O,2),w=x[0],S=x[1],U=r.a.useState(!1),L=Object(l.a)(U,2),j=L[0],A=L[1],P=r.a.useState(!1),D=Object(l.a)(P,2),T=D[0],I=D[1],z=r.a.useState({}),q=Object(l.a)(z,2),J=q[0],V=q[1];function R(){k(!1),S(!1),A(!1),I(!1)}return r.a.useEffect((function(){g.getUserInfoServer("/users/me").then((function(e){n(e)})).catch((function(e){return console.log(e)})),g.getInitialCards("/cards").then((function(e){s(e)})).catch((function(e){return console.log(e)}))}),[]),r.a.useEffect((function(){window.addEventListener("keydown",(function(e){"Escape"===e.key&&R()}))}),[]),r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"page"},r.a.createElement(_.Provider,{value:a},r.a.createElement(p,null),r.a.createElement(f,{onEditProfile:function(){k(!0)},onAddPlace:function(){S(!0)},onEditAvatar:function(){A(!0)},onCardClick:function(e){I(!0),V(e)},cards:u,onCardLike:function(e){(e.likes.some((function(e){return e._id===a._id}))?g.deleteLikeCard("/cards/likes/".concat(e._id)):g.putLikeCard("/cards/likes/".concat(e._id))).then((function(t){var a=u.map((function(a){return a._id===e._id?t:a}));s(a)})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){g.deleteCard("/cards/".concat(e._id)).then((function(){var t=u.filter((function(t){return t._id!==e._id}));s(t)})).catch((function(e){return console.log(e)}))}}),r.a.createElement(N,{isOpen:j,onClose:R,onUpdateAvatar:function(e){g.changeAvatar("/users/me/avatar",e).then((function(e){n(e),R()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(C,{isOpen:b,onClose:R,onUpdateUser:function(e){g.sendUserInfo("/users/me",e).then((function(e){n(e),R()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(y,{isOpen:w,onClose:R,onAddPlace:function(e){g.sendCard("/cards",e).then((function(e){s([e].concat(Object(i.a)(u))),R()})).catch((function(e){return console.log(e)}))}}),r.a.createElement(v,{name:"deleting-card",title:"\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b?"}),r.a.createElement(E,{card:J,isOpen:T,onClose:R}),r.a.createElement(h,null))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,a){e.exports=a.p+"static/media/logo.855a8c98.svg"}},[[11,1,2]]]);
//# sourceMappingURL=main.bd1ca4b2.chunk.js.map